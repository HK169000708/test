<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="evaluation.dao.TeacherDao">

 <resultMap id="teachertm" type="evaluation.entity.Teacher">
      
		<id property="teacherid" column="teacherid" />
		<result property="name" column="name" />
		<result property="sex" column="sex" />
		<result property="teachernumber" column="teachernumber" />
		<result property="phone" column="phone" />
		<result property="password" column="password" />
		<result property="power" column="power" />
		<result property="majorid" column="majorid" />
		<result property="remarks" column="remarks" />		
		<result property="birthday" column="birthday" />
		<association property="maj"
			javaType="evaluation.entity.Major">
			<id property="majorid" column="majorid" />
			<result property="majornumber" column="majornumber" />
			<result property="majorname" column="majorname" />
			<result property="facultyid" column="facultyid" />
		</association>
		
	</resultMap>

      <select id="getTeachersmajor" resultMap="teachertm">
      	select * from teacher,major where	teacher.majorid=major.majorid;
      </select>

      <select id="getTeacher" parameterType="evaluation.entity.Teacher" resultType="evaluation.entity.Teacher">
		select * from teacher where teachernumber=#{teachernumber} and password=#{password}
      </select>   

	  <select id="getTeachers" parameterType="evaluation.util.Page" resultType="evaluation.entity.Teacher">
		select * from teacher order by teacherid asc limit #{pageIndex},#{pageSize}
      </select>
      
      <select id="getTeacherByid" parameterType="int" resultType="evaluation.entity.Teacher">
		select * from teacher where teacherid = #{teacherid}
     </select>
      
      <select id="getCount" resultType="int">
		select count(1) from teacher 
	  </select>
	  
      <select id="getTeacherByNum" parameterType="String" resultType="int">
		select count(1) from teacher where teachernumber=#{teachernumber}
	  </select>
      
      <insert id="addTeacher" parameterType="evaluation.entity.Teacher">
      	insert into teacher(name,teachernumber,sex,password,power,majorid) 
      	values (#{name},#{teachernumber},#{sex},#{password},#{power},#{majorid});
      </insert>      
      
      <delete id="delTeacher" parameterType="String">
		delete from teacher where teachernumber=#{teachernumber}
	  </delete>
	  
      <update id="updateTeacher" parameterType="evaluation.entity.Teacher">
		update teacher
		set name=#{name},teachernumber=#{teachernumber},sex=#{sex},password=#{password},
		power=#{power},majorid=#{majorid} where teacherid=#{teacherid}
	  </update>
	  
     <select id="getteacherpower"  resultType="evaluation.entity.Teacher">
     select * from teacher 
     </select>
      <update id="updatepower"  >
       update teacher set power=#{power} where teacherid=#{teacherid}
    
     </update>

</mapper>